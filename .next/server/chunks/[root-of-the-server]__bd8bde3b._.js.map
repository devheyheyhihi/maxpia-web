{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///Users/sinseonghyeon/Documents/GitHub/01-blockchain-projects/maxpia-project/maxpia-web/src/app/api/upload/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { writeFile } from 'fs/promises';\nimport { join } from 'path';\nimport { mkdirSync, existsSync } from 'fs';\n\nexport async function POST(request: NextRequest) {\n  const data = await request.formData();\n  const file: File | null = data.get('file') as unknown as File;\n\n  if (!file) {\n    return NextResponse.json({ success: false, error: 'No file found' });\n  }\n\n  const bytes = await file.arrayBuffer();\n  const buffer = Buffer.from(bytes);\n\n  // 'public/uploads' 디렉토리 확인 및 생성\n  const uploadDir = join(process.cwd(), 'public', 'uploads');\n  if (!existsSync(uploadDir)) {\n    mkdirSync(uploadDir, { recursive: true });\n  }\n\n  // 파일명에 타임스탬프를 추가하여 중복 방지\n  const timestamp = Date.now();\n  const filename = `${timestamp}_${file.name}`;\n  const path = join(uploadDir, filename);\n\n  await writeFile(path, buffer);\n  console.log(`File uploaded to ${path}`);\n\n  // 클라이언트에서 접근할 수 있는 URL 경로 반환\n  const url = `/uploads/${filename}`;\n\n  return NextResponse.json({ success: true, url: url });\n} "],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,MAAM,OAAO,MAAM,QAAQ,QAAQ;IACnC,MAAM,OAAoB,KAAK,GAAG,CAAC;IAEnC,IAAI,CAAC,MAAM;QACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAgB;IACpE;IAEA,MAAM,QAAQ,MAAM,KAAK,WAAW;IACpC,MAAM,SAAS,OAAO,IAAI,CAAC;IAE3B,gCAAgC;IAChC,MAAM,YAAY,CAAA,GAAA,iGAAA,CAAA,OAAI,AAAD,EAAE,QAAQ,GAAG,IAAI,UAAU;IAChD,IAAI,CAAC,CAAA,GAAA,6FAAA,CAAA,aAAU,AAAD,EAAE,YAAY;QAC1B,CAAA,GAAA,6FAAA,CAAA,YAAS,AAAD,EAAE,WAAW;YAAE,WAAW;QAAK;IACzC;IAEA,yBAAyB;IACzB,MAAM,YAAY,KAAK,GAAG;IAC1B,MAAM,WAAW,GAAG,UAAU,CAAC,EAAE,KAAK,IAAI,EAAE;IAC5C,MAAM,OAAO,CAAA,GAAA,iGAAA,CAAA,OAAI,AAAD,EAAE,WAAW;IAE7B,MAAM,CAAA,GAAA,qHAAA,CAAA,YAAS,AAAD,EAAE,MAAM;IACtB,QAAQ,GAAG,CAAC,CAAC,iBAAiB,EAAE,MAAM;IAEtC,6BAA6B;IAC7B,MAAM,MAAM,CAAC,SAAS,EAAE,UAAU;IAElC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAAM,KAAK;IAAI;AACrD","debugId":null}}]
}